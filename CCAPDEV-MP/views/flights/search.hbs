<div class="row">
  <div class="col-12 col-lg-4">
    <div class="card shadow-sm mb-4">
      <div class="card-body">
        <h1 class="h4 mb-3">Search Flights</h1>
        <form action="/flights/search" method="get" class="vstack gap-3">
          <div>
            <label class="form-label" for="origin">Origin</label>
            <input
              class="form-control"
              id="origin"
              name="origin"
              type="text"
              placeholder="Manila"
              value="{{filters.origin}}"
              required
            />
          </div>
          <div>
            <label class="form-label" for="destination">Destination</label>
            <input
              class="form-control"
              id="destination"
              name="destination"
              type="text"
              placeholder="Tokyo"
              value="{{filters.destination}}"
              required
            />
          </div>
          <div>
            <label class="form-label" for="departure">Departure Date</label>
            <input
              class="form-control"
              id="departure"
              name="departure"
              type="date"
              value="{{filters.departure}}"
            />
          </div>
          <button class="btn btn-primary w-100" type="submit">Search</button>
        </form>
      </div>
    </div>
  </div>
  <div class="col-12 col-lg-8">
    <div class="d-flex align-items-center justify-content-between mb-3">
      <h2 class="h4 mb-0">Available Flights</h2>
      {{#if attemptedSearch}}
        <a class="btn btn-outline-secondary btn-sm" href="/flights/search">Clear</a>
      {{/if}}
    </div>
    {{#if hasResults}}
      <div class="vstack gap-3">
        {{#each flights}}
          <article class="card shadow-sm">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start flex-wrap gap-2">
                <div>
                  <h3 class="h5 mb-1 text-success">{{flightNumber}} · {{route}}</h3>
                  <div class="text-muted small">
                    Departure: {{formatDate departureTime}} · Arrival: {{formatDate arrivalTime}}
                  </div>
                  <div class="text-muted small">Aircraft: {{aircraftType}}</div>
                </div>
                <div class="text-end">
                  <div class="fw-semibold">{{currency baseFare}}</div>
                  <div class="text-muted small">per passenger</div>
                  <a class="btn btn-sm btn-outline-primary mt-2" href="/reservations/new?flightId={{_id}}">
                    Book this flight
                  </a>
                </div>
              </div>
              {{#if amenities.length}}
                <div class="d-flex flex-wrap gap-2 mt-3">
                  {{#each amenities}}
                    <span class="badge text-bg-light">{{this}}</span>
                  {{/each}}
                </div>
              {{/if}}
            </div>
          </article>
        {{/each}}
      </div>
    {{else}}
      <div class="alert alert-info">
        {{#if attemptedSearch}}
          No flights match your search. Try adjusting your filters.
        {{else}}
          Search for flights by selecting an origin, destination, and optional departure date.
        {{/if}}
      </div>
    {{/if}}
  </div>
</div>

